<div class="container mt-4" *ngIf="!isLoading">
  <div class="card">
    <div class="card-header">
      <h2>Application Details</h2>
    </div>
    <div class="card-body">
      <div class="row mb-4">
        <div class="col-md-6">
          <h4>Student Information</h4>
          <p><strong>Name:</strong> {{ application?.studentName }}</p>
          <p><strong>Email:</strong> {{ application?.studentEmail }}</p>
        </div>
        <div class="col-md-6">
          <h4>Application Status</h4>
          <p>
            <strong>Status:</strong>
            <span [class]="getStatusClass(application?.status || '')">
              {{ application?.status }}
            </span>
          </p>
          <p><strong>Submission Date:</strong> {{ application?.submissionDate | date }}</p>
        </div>
      </div>

      <div class="row mb-4" *ngIf="analysisResult">
        <div class="col-12">
          <h4>CV Analysis Results</h4>
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <h5>Overall Score</h5>
                  <div class="progress mb-3">
                    <div class="progress-bar" 
                         [class.bg-success]="analysisResult.score >= 60"
                         [class.bg-warning]="analysisResult.score >= 50 && analysisResult.score < 60"
                         [class.bg-danger]="analysisResult.score < 50"
                         [style.width.%]="analysisResult.score">
                      {{ analysisResult.score }}%
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <h5>Detailed Scores</h5>
                  <div class="mb-2">
                    <label>Education: {{ analysisResult.detailedScores.education }}/25</label>
                    <div class="progress">
                      <div class="progress-bar" [style.width.%]="(analysisResult.detailedScores.education/25)*100"></div>
                    </div>
                  </div>
                  <div class="mb-2">
                    <label>Experience: {{ analysisResult.detailedScores.experience }}/30</label>
                    <div class="progress">
                      <div class="progress-bar" [style.width.%]="(analysisResult.detailedScores.experience/30)*100"></div>
                    </div>
                  </div>
                  <div class="mb-2">
                    <label>Skills: {{ analysisResult.detailedScores.skills }}/30</label>
                    <div class="progress">
                      <div class="progress-bar" [style.width.%]="(analysisResult.detailedScores.skills/30)*100"></div>
                    </div>
                  </div>
                  <div class="mb-2">
                    <label>Project Relevance: {{ analysisResult.detailedScores.projectRelevance }}/15</label>
                    <div class="progress">
                      <div class="progress-bar" [style.width.%]="(analysisResult.detailedScores.projectRelevance/15)*100"></div>
                    </div>
                  </div>
                  <div class="mb-2">
                    <label>Field Match: {{ analysisResult.detailedScores.fieldMatch }}/10</label>
                    <div class="progress">
                      <div class="progress-bar" [style.width.%]="(analysisResult.detailedScores.fieldMatch/10)*100"></div>
                    </div>
                  </div>
                  <div class="mb-2">
                    <label>Title Match: {{ analysisResult.detailedScores.titleMatch }}/10</label>
                    <div class="progress">
                      <div class="progress-bar" [style.width.%]="(analysisResult.detailedScores.titleMatch/10)*100"></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-12">
                  <h5>Feedback</h5>
                  <div class="feedback-box p-3">
                    {{ analysisResult.feedback }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <h4>Documents</h4>
          <div class="btn-group">
            <button class="btn btn-primary" (click)="downloadFile('cv')">
              Download CV
            </button>
            <button class="btn btn-primary" (click)="downloadFile('coverLetter')">
              Download Cover Letter
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="text-center" *ngIf="isLoading">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div> 