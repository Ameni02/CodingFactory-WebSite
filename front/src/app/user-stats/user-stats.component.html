<div style="margin-top: 20px" class="stats-container">
    <!-- Left Side: Stats -->
    <div class="stats-left pizzazz-panel" style="text-align: center">
      <h3>ðŸŒŸ Average Stats</h3>
      <div>
        <p><strong>Average Correct Answers: </strong>{{ averageCorrectAnswers }}%</p>
        <p><strong>Average Time Spent: </strong>{{ formatTime(averageTimeSpent) }}</p>
      </div>

      <!-- Circular Progress Chart for Correct Answers -->
      <svg viewBox="0 0 36 36" class="circular-chart" style="transform: rotate(0deg)">
        <path class="circle-bg"
              d="M18 2.0845
                 a 15.9155 15.9155 0 0 1 0 31.831
                 a 15.9155 15.9155 0 0 1 0 -31.831" />
        <path class="circle"
              [attr.stroke-dasharray]="(averageTimeSpent/180*100) + ', 100'"
              d="M18 2.0845
                 a 15.9155 15.9155 0 0 1 0 31.831
                 a 15.9155 15.9155 0 0 1 0 -31.831" />
        <text x="50%" y="50%" class="percentage" style="font-size: 0.7em; text-anchor: middle">
          {{ (averageTimeSpent /180*100) | number:'1.0-0' }}%
        </text>
      </svg>
      <br>
      <button (click)="downloadCertificate()" class="fancy-button">
        <span class="button-icon" style="margin-right: 5px; color: #ffffff">âœ¨</span>
        <span class="button-text" style="font-weight: bold; color: #ffffff">Download Certificate</span>
      </button>
    </div>

    <!-- Right Side: Quizzes Taken -->
    <div class="stats-right" style="overflow-y: scroll; max-height: 70vh">
      <h3>Your Quiz Stats</h3>

      <div *ngFor="let quiz of quizzesTaken" class="quiz-card" style="outline: 2px solid #F07081; border-radius: 8px">
        <div class="quiz-title">
          <h4>{{ quiz.title }}</h4>
        </div>
        <div class="quiz-details">
          <p><strong>Score:</strong> {{ quiz.score }} / {{ quiz.questionCount }}</p>
          <p><strong>Rank:</strong> {{ quiz.rank }}</p>
          <p><strong>Time Spent:</strong> {{ formatTime(quiz.timeSpent) }}</p>
        </div>
      </div>
    </div>
</div>

<style>
.stats-container {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  margin-top: 20px;
  width: 1280px;
  margin: 0 auto;
}

.stats-left, .stats-right {
  width: 48%;
  background-image: linear-gradient(135deg, #ffffff, #f7f7f7);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  padding: 20px;
  border-radius: 12px;
 


}

h3 {
  text-align: center;
  font-size: 24px;
  color: #333;
}

.circular-chart {
  max-width: 200px;
  max-height: 200px;
  margin: 20px auto;
  transform: rotate(-90deg);
}

.circle-bg {
  fill: none;
  stroke: #eee;
  stroke-width: 3.8;
}

.circle {
  fill: none;
  stroke-width: 2.8; 
  stroke: #F07081;
  stroke-linecap: round;
  animation: progress 1s ease-out forwards;
}

.percentage {
  fill: #333;
  font-size: 1em;
  text-anchor: middle;
  dominant-baseline: central;
}

.quiz-card {
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 10px;
  margin-bottom: 15px;
  background-color: #f9f9f9;
}

.quiz-title h4 {
  margin: 0;
  font-size: 16px;
  color: #333;
}

.quiz-details p {
  margin: 5px 0;
}

.quiz-details strong {
  font-weight: bold;
}

@keyframes progress {
  0% {
    stroke-dasharray: 0, 100;
  }
}

.fancy-button {
  background-image: linear-gradient(to right,#F07081, #B793BC);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
}

.fancy-button:hover {
  background-image: linear-gradient(to right,#F07081, #B793BC);
}
</style>

