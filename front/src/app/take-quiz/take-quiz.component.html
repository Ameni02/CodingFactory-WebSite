<div class="quiz-wrapper" *ngIf="quiz">
  <div class="quiz-card">
    <h2 class="quiz-title">{{ quiz.title }}</h2>
    <p class="quiz-description">{{ quiz.description }}</p>
    <p class="timer" style="position: absolute; right: 10px; top: 10px;">Temps restant: {{ displayTime }}</p>

    <div class="question-section">
      <h4 class="question-title">
        Question {{ currentQuestionIndex + 1 }}: {{ currentQuestion.text }}
      </h4>

      <ul class="options-list">
        <li class="option-item" *ngFor="let option of currentQuestion.options">
          <label class="option-label">
            <input
              type="radio"
              [name]="'question' + currentQuestionIndex"
              [value]="option.id"
              (change)="selectAnswer(currentQuestionIndex, option.id)"
              [checked]="selectedAnswers[currentQuestionIndex] === option.id"
              class="option-input"
            />
            <span class="option-text">{{ option.text }}</span>
          </label>
        </li>
      </ul>
    </div>

    <div class="navigation-buttons">
      <button class="nav-btn prev-btn" (click)="prevQuestion()" [disabled]="currentQuestionIndex === 0">
        Précédent
      </button>
      <button class="submit-btn" (click)="submitQuiz()" *ngIf="currentQuestionIndex === quiz.questions.length - 1">
        Soumettre
      </button>
      <button class="nav-btn next-btn" (click)="nextQuestion()" [disabled]="currentQuestionIndex === quiz.questions.length - 1">
        Suivant
      </button>
    </div>
  </div>
</div>

<div class="loading-container" *ngIf="!quiz">
  <p class="loading-text">Chargement du quiz...</p>
</div>

<!-- Definition popup at selection position -->
<div
  class="definition-popup"
  *ngIf="showDefinitionPopup"
  [ngStyle]="{ top: popupY + 'px', left: popupX + 'px' }"
  (mouseenter)="keepPopup()"
  (mouseleave)="hidePopup()"
>
  <p><strong>{{ selectedWord }}</strong>: {{ wordDefinition }}</p>
</div>



<style>

.definition-popup {
  position: absolute;
  background: white;
  padding: 10px;
  border: 1px solid gray;
  border-radius: 6px;
  box-shadow: 0 0 10px rgba(0,0,0,0.2);
  max-width: 250px;
  z-index: 1000;
}


  body {
    background-color: #eef1f6;
    font-family: 'Segoe UI', sans-serif;
  }

  .quiz-wrapper {
    max-width: 1200px;
    width: 1200px;
    display: flex;
    justify-content: center;
    padding: 40px 20px;
  }

  .quiz-card {
    background-color: #ffffff;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    max-width: 700px;
    width: 100%;
   
    text-align: center;
  }

  .quiz-title {
    font-size: 28px;
    font-weight: 500;
    color: #333;
 
  }

  .quiz-description {
    font-size: 16px;
    color: #666;
    
  }

  .timer {
    font-weight: 600;
    color: #d32f2f;
    margin-bottom: 20px;
  }

  .question-section {
    margin-bottom: 10px;
  }

  .question-title {
    font-size: 15px;
    font-weight: 500;
   
    color: #222;
  }

  .options-list {
    list-style: none;
    padding: 0;
  }

  .option-item {
    margin-bottom: 12px;
  }

  .option-label {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    border: 1px solid #ddd;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.3s ease;
    background-color: #fafafa;
  }

  .option-label:hover {
    background-color: #f0f8ff;
  }

  .option-input {
    margin-right: 12px;
    transform: scale(1.2);
  }

  .option-text {
    font-size: 15px;
    color: #333;
  }

  .navigation-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
  }

  .nav-btn {
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  .prev-btn {
    background-color: #e0e0e0;
    color: #333;
  }

  .next-btn {
    background-image: linear-gradient(to right, #F07081, #B793BC);
    color: white;
  }

  .nav-btn:disabled {
    background-color: #ccc;
    cursor: not-allowed;
  }

  .nav-btn:not(:disabled):hover {
    background-image: linear-gradient(to right, #c55a7d, #b879a4);
    color: #fff;
  }
  .submit-btn {
    background-color: white;
    color: black;
    border: 2px solid #F07081;
    padding: 12px 10px;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
  }

  .submit-btn:hover {
    background-color: rgb(233, 233, 233);
  }

  .loading-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .loading-text {
    font-size: 22px;
    font-weight: 600;
    color: #555;
  }
</style>
